@page "/"
@using Introspection.Hexagon.UseCases
@using Introspection.Hexagon.Gateways.Repositories
@using Introspection.Adapters.Secondary.Repositories.InMemory
@using Introspection.Hexagon.Models

<PageTitle>Introspection</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Day Introspection</MudText>

<MudStack Row="true">
    
    <MudPaper Width="300px">
        
        <MudList Clickable="true" @bind-SelectedItem="selectedItem" @bind-SelectedValue="selectedValue" Color="_color">
            <MudListSubheader>Day Will</MudListSubheader>
            @foreach (var will in wills){
                <MudListItem Text="@will.Name" Value="@will.Name"/>
                <MudRadioGroup T="Color" @bind-SelectedOption="_color" Class="d-flex flex-column">
                    <MudRadio Option="Color.Secondary" Color="Color.Secondary">@StatusDayValidation.Missed</MudRadio>
                    <MudRadio Option="Color.Success" Color="Color.Success">@StatusDayValidation.Validated</MudRadio>
                </MudRadioGroup>
            }
        </MudList>
        
    </MudPaper>
    
    <MudPaper Class="pe-4">

    </MudPaper>
</MudStack>

@code{

    MudListItem selectedItem;
    object selectedValue = 1;
    Color _color = Color.Primary;
    
    protected IEnumerable<Will> wills { get; set; }
    
    protected override async Task OnInitializedAsync()
    {
        IWillRepository willRepository = new InMemoryWillRepository();
        var handler = new DayWillsQueryHandler(willRepository);
        wills = await handler.Handle(new DateTime(2022, 1, 1));
    }
}